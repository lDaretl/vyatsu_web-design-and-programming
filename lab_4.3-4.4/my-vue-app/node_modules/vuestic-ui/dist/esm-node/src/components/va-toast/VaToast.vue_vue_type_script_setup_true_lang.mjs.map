{"version":3,"file":"VaToast.vue_vue_type_script_setup_true_lang.mjs","sources":["../../../../../src/components/va-toast/VaToast.vue"],"sourcesContent":["<template>\n  <Transition name=\"va-toast-fade\" @after-leave=\"onHidden\">\n    <div\n      v-show=\"visible\"\n      ref=\"rootElement\"\n      :role=\"$props.role ?? $props.closeable ? 'alertdialog' : 'alert'\"\n      :aria-live=\"computedAriaLive\"\n      aria-atomic=\"true\"\n      class=\"va-toast\"\n      :class=\"toastClasses\"\n      :style=\"toastStyles\"\n      @mouseenter=\"clearTimer\"\n      @mouseleave=\"startTimer\"\n      @click=\"onToastClick\"\n    >\n      <div class=\"va-toast__group\">\n        <h2 v-if=\"$props.title\" class=\"va-toast__title\" v-text=\"$props.title\" />\n\n        <div class=\"va-toast__content\" v-show=\"$props.message\">\n          <div v-if=\"$props.dangerouslyUseHtmlString\" v-html=\"computedMessage\" />\n          <p v-else v-text=\"computedMessage\" />\n        </div>\n\n        <div class=\"va-toast__content\" v-if=\"$props.render\">\n          <VaToastRenderer :render=\"$props.render\" />\n        </div>\n\n        <va-icon\n          v-if=\"$props.closeable\"\n          class=\"va-toast__close-icon\"\n          role=\"button\"\n          :aria-label=\"tp($props.ariaCloseLabel)\"\n          tabindex=\"0\"\n          size=\"1rem\"\n          :name=\"$props.icon\"\n          @click.stop=\"onToastClose\"\n          @keydown.enter.stop=\"onToastClose\"\n        />\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script lang=\"ts\">\nimport { PropType, ref, computed, onMounted, shallowRef, defineComponent, ComputedRef } from 'vue'\n\nimport { useComponentPresetProp, useColors, useTimer, useTextColor, useTranslation, useTranslationProp, useNumericProp } from '../../composables'\n\nimport { ToastPosition } from './types'\nimport { useToastService } from './hooks/useToastService'\n\nimport { StringWithAutocomplete } from '../../utils/types/prop-type'\n</script>\n\n<script lang=\"ts\" setup>\nimport VaIcon from '../va-icon/VaIcon.vue'\n\nconst VaToastRenderer = defineComponent({\n  name: 'VaToastRenderer',\n  props: {\n    render: { type: Function, required: true },\n  },\n  setup: (props) => () => props.render(),\n})\n\ndefineOptions({\n  name: 'VaToast',\n})\n\nconst { tp } = useTranslation()\n\nconst props = defineProps({\n  ...useComponentPresetProp,\n  title: { type: String, default: '' },\n  offsetY: { type: [Number, String], default: 16 },\n  offsetX: { type: [Number, String], default: 16 },\n  message: { type: [String, Function], default: '' },\n  dangerouslyUseHtmlString: { type: Boolean, default: false },\n  icon: { type: String, default: 'close' },\n  customClass: { type: String, default: '' },\n  duration: { type: [Number, String], default: 5000 },\n  color: { type: String, default: 'primary' },\n  closeable: { type: Boolean, default: true },\n  onClose: { type: Function },\n  onClick: { type: Function },\n  multiLine: { type: Boolean, default: false },\n  position: {\n    type: String as PropType<ToastPosition>,\n    default: 'top-right',\n    validator: (value: string) => ['top-right', 'top-center', 'top-left', 'bottom-right', 'bottom-center', 'bottom-left'].includes(value),\n  },\n  render: { type: Function },\n  ariaCloseLabel: useTranslationProp('$t:close'),\n  role: { type: String as PropType<StringWithAutocomplete<'alert' | 'alertdialog' | 'status'>>, default: undefined },\n  inline: { type: Boolean, default: false },\n})\n\nconst emit = defineEmits(['on-click', 'on-close'])\n\nconst rootElement = shallowRef<HTMLElement>()\n\nconst { getColor } = useColors()\n\nconst { textColorComputed } = useTextColor(computed(() => getColor(props.color)))\nconst offsetYComputed = useNumericProp('offsetY') as ComputedRef<number>\nconst offsetXComputed = useNumericProp('offsetX') as ComputedRef<number>\nconst durationComputed = useNumericProp('duration') as ComputedRef<number>\n\nconst visible = ref(false)\n\nconst {\n  yOffset,\n  updateYOffset,\n} = useToastService(props)\n\nconst positionObject = computed(() => ({\n  vertical: props.position.includes('top') ? 'top' : 'bottom',\n  horizontal: props.position.includes('center') ? 'center' : props.position.includes('right') ? 'right' : 'left',\n}))\n\nconst getPositionStyle = () => {\n  const vertical = positionObject.value.vertical\n  const horizontal = positionObject.value.horizontal\n\n  if (horizontal === 'center') {\n    return {\n      [vertical]: `${offsetYComputed.value + yOffset.value}px`,\n      left: '50%',\n      '--va-toast-x-shift': '-50%',\n    }\n  }\n\n  return {\n    [vertical]: `${offsetYComputed.value + yOffset.value}px`,\n    [horizontal]: `${offsetXComputed.value}px`,\n  }\n}\n\nconst toastClasses = computed(() => [\n  props.customClass,\n  props.multiLine ? 'va-toast--multiline' : '',\n  props.inline ? 'va-toast--inline' : '',\n  [`va-toast--${props.position}`],\n])\n\nconst toastStyles = computed(() => ({\n  ...getPositionStyle(),\n  backgroundColor: getColor(props.color),\n  color: textColorComputed.value,\n}))\n\nconst computedAriaLive = computed(() => {\n  if (props.role === 'status') {\n    return 'polite'\n  } else {\n    return 'assertive'\n  }\n})\n\nconst computedMessage = computed(() => (typeof props.message === 'function') ? props.message() : props.message)\n\nconst destroyElement = () => {\n  rootElement.value?.removeEventListener('transitionend', destroyElement)\n\n  rootElement.value?.remove()\n}\n\nconst onToastClick = () => {\n  if (typeof props.onClick === 'function') {\n    props.onClick()\n  } else {\n    emit('on-click')\n  }\n}\n\nconst onToastClose = () => {\n  visible.value = false\n  updateYOffset()\n}\n\nconst onHidden = () => {\n  if (typeof props.onClose === 'function') {\n    props.onClose()\n  } else {\n    emit('on-close')\n  }\n  destroyElement()\n}\n\nconst timer = useTimer()\nconst clearTimer = timer.clear\nconst startTimer = () => {\n  if (durationComputed.value > 0) {\n    timer.start(() => visible.value && onToastClose(), durationComputed.value)\n  }\n}\n\nonMounted(() => {\n  visible.value = true\n\n  startTimer()\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-toast {\n  --va-toast-x-shift: 0px;\n  --va-toast-animation-x-shift: 0px;\n  --va-toast-animation-y-shift: 100%;\n\n  position: fixed;\n  box-sizing: border-box;\n  width: var(--va-toast-width);\n  padding: var(--va-toast-padding);\n  display: flex;\n  align-items: center;\n  border-radius: var(--va-toast-border-radius);\n  border: var(--va-toast-border);\n  background-color: var(--va-toast-background-color);\n  box-shadow: var(--va-toast-box-shadow);\n  transition: var(--va-toast-transition);\n  overflow: hidden;\n  z-index: var(--va-toast-z-index);\n  font-family: var(--va-font-family);\n  transform: translateX(var(--va-toast-x-shift));\n\n  &--top-right,\n  &--bottom-right {\n    --va-toast-animation-x-shift: 100%;\n  }\n\n  &--top-left,\n  &--bottom-left {\n    --va-toast-animation-x-shift: -100%;\n  }\n\n  &--top-left,\n  &--top-center,\n  &--top-right {\n    --va-toast-animation-y-shift: -100%;\n  }\n\n  &--inline {\n    position: static;\n  }\n\n  &--multiline {\n    min-height: 70px;\n  }\n\n  &__title {\n    font-weight: var(--va-toast-title-font-weight);\n    font-size: var(--va-toast-title-font-size);\n    margin: var(--va-toast-title-margin);\n\n    @include va-title();\n  }\n\n  &__content {\n    font-size: var(--va-toast-content-font-size);\n    line-height: var(--va-toast-content-line-height);\n    padding-right: var(--va-toast-content-padding-right);\n\n    p,\n    div {\n      margin: 0;\n    }\n  }\n\n  &__icon {\n    height: var(--va-toast-icon-height);\n    width: var(--va-toast-icon-width);\n    font-size: var(--va-toast-icon-font-size);\n  }\n\n  &__close-icon {\n    position: absolute;\n    top: 50%;\n    right: var(--va-toast-close-icon-right);\n    cursor: pointer;\n    transform: translateY(-50%);\n    font-size: var(--va-toast-close-icon-font-siz);\n    opacity: 0.7;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n\n.va-toast-fade {\n  &-enter-from {\n    transform: translateX(calc(var(--va-toast-animation-x-shift) + var(--va-toast-x-shift)));\n  }\n\n  &-leave-to {\n    transform: translateY(var(--va-toast-animation-y-shift));\n    opacity: 0;\n  }\n}\n</style>\n"],"names":["props"],"mappings":"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"}