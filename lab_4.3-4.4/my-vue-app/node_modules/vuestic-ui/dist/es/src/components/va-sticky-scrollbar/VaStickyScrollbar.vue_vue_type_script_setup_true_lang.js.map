{"version":3,"file":"VaStickyScrollbar.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/va-sticky-scrollbar/VaStickyScrollbar.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport { getScrollbarSize } from '../../utils/scrollbar-size'\nimport { useEvent, useElementRect, useResizeObserver, useNumericProp } from '../../composables'\n\nconst props = withDefaults(defineProps<{\n    el?: HTMLElement | null\n    direction?: 'vertical' | 'horizontal',\n    offset?: number | string,\n  }>(), {\n  direction: 'horizontal',\n  offset: 0,\n})\nconst currentEl = ref(null as HTMLElement | null)\n\nconst offsetProp = useNumericProp('offset')\n\nconst parentElement = computed(() => {\n  if (props.el) { return props.el }\n\n  return currentEl.value?.parentNode as HTMLElement ?? null\n})\n\nconst parentRect = useElementRect(parentElement)\n\nconst stickyScrollWrapperStyle = computed(() => {\n  const el = parentElement.value\n\n  if (!el) { return {} }\n\n  const parentEl = el as HTMLElement\n\n  const scrollSize = getScrollbarSize(parentEl)\n\n  const { bottom, left, right, top } = parentRect.value\n\n  if (props.direction === 'vertical') {\n    if (left > window.innerWidth) { return { display: 'none' } }\n    if (right < window.innerWidth) { return { display: 'none' } }\n\n    return {\n      position: 'fixed' as const,\n      top: `${top}px`,\n      right: 0,\n      height: `${parentEl.clientHeight}px`,\n      overflowY: 'auto' as const,\n      overflowX: 'hidden' as const,\n    }\n  }\n\n  if (top > window.innerHeight) { return { display: 'none' } }\n  if (bottom < window.innerHeight) { return { display: 'none' } }\n\n  return {\n    position: 'fixed' as const,\n    top: `${Math.min(bottom, window.innerHeight) - scrollSize - Number(offsetProp.value)}px`,\n    width: `${parentEl.clientWidth}px`,\n    overflowX: 'auto' as const,\n    overflowY: 'hidden' as const,\n  }\n})\n\nuseEvent('scroll', (e) => {\n  if (!currentEl.value) { return }\n\n  if (props.direction === 'horizontal') {\n    parentElement.value?.scrollTo({\n      left: currentEl.value.scrollLeft,\n    })\n  } else {\n    parentElement.value?.scrollTo({\n      top: currentEl.value.scrollTop,\n    })\n  }\n}, currentEl)\n\nuseEvent('scroll', (e) => {\n  if (!currentEl.value) { return }\n\n  if (props.direction === 'horizontal') {\n    if (parentElement.value?.scrollLeft === currentEl.value.scrollLeft) { return }\n\n    currentEl.value.scrollTo({\n      left: parentElement.value?.scrollLeft,\n    })\n  } else {\n    if (parentElement.value?.scrollTop === currentEl.value.scrollTop) { return }\n\n    currentEl.value.scrollTo({\n      top: parentElement.value?.scrollTop,\n    })\n  }\n}, parentElement)\n\nconst scrollWidth = ref(0)\nconst scrollHeight = ref(0)\n\nuseResizeObserver(computed(() => {\n  if (!parentElement.value) { return [] }\n\n  return [...parentElement.value.children] as HTMLElement[]\n}), () => {\n  scrollWidth.value = parentElement.value.scrollWidth\n  scrollHeight.value = parentElement.value.scrollHeight\n})\n\nconst fakeContentStyle = computed(() => {\n  if (props.direction === 'vertical') {\n    return {\n      width: '1px',\n      height: `${scrollHeight.value}px`,\n    }\n  }\n\n  return {\n    height: '1px',\n    width: `${scrollWidth.value}px`,\n  }\n})\n</script>\n\n<template>\n  <div :style=\"stickyScrollWrapperStyle\" ref=\"currentEl\">\n    <div :style=\"fakeContentStyle\"></div>\n  </div>\n</template>\n"],"names":[],"mappings":"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"}